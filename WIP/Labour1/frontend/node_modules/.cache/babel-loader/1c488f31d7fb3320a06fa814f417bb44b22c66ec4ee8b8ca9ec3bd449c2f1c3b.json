{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport server from '../../../utilites/connection';\nconst logURI = '/auth/login';\nconst checkToken = 'auth/user';\nconst regURI = '/auth/registration';\nconst initialState = {\n  newUser: {\n    userName: '',\n    email: '',\n    phone: '',\n    password: '',\n    token: null,\n    isLoading: false,\n    status: null\n  },\n  userLogin: {\n    data: null,\n    status: null\n  }\n};\nexport const LoginAttempt = createAsyncThunk('auth/LoginAttempt', async params => {\n  try {\n    const res = await server.post(logURI, params);\n    return res.data;\n  } catch (error) {\n    console.log(`Login failed: ${error}`);\n  }\n});\nexport const checkAuth = createAsyncThunk('auth/checkAuth', async () => {\n  try {\n    const res = await server.get(checkToken);\n    return res.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logOut: state => {\n      state.userLogin.data = null;\n    }\n  },\n  extraReducers: {\n    [LoginAttempt.pending]: state => {\n      state.userLogin.status = 'loading';\n      state.userLogin.data = null;\n    },\n    [LoginAttempt.fulfilled]: (state, action) => {\n      state.userLogin.status = 'complete';\n      state.userLogin.data = action.payload;\n    },\n    [LoginAttempt.rejected]: state => {\n      state.userLogin.status = 'error';\n      state.userLogin.data = null;\n    }\n  }\n});\n\n// checking if user = authorized\nexport function isAuthorized(state) {\n  return Boolean(state.auth.userLogin.data);\n}\nexport const {\n  logOut\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","server","logURI","checkToken","regURI","initialState","newUser","userName","email","phone","password","token","isLoading","status","userLogin","data","LoginAttempt","params","res","post","error","console","log","checkAuth","get","authSlice","name","reducers","logOut","state","extraReducers","pending","fulfilled","action","payload","rejected","isAuthorized","Boolean","auth","actions","reducer"],"sources":["C:/Users/forbi/Documents/Git/handover/WIP/Labour1/frontend/src/redux/features/auth/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport server from '../../../utilites/connection';\r\n\r\nconst logURI = '/auth/login';\r\nconst checkToken = 'auth/user';\r\nconst regURI = '/auth/registration';\r\n\r\nconst initialState = {\r\n  newUser: {\r\n    userName: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    token: null,\r\n    isLoading: false,\r\n    status: null,\r\n  },\r\n  userLogin: {\r\n    data: null,\r\n    status: null,\r\n  },\r\n};\r\n\r\nexport const LoginAttempt = createAsyncThunk(\r\n  'auth/LoginAttempt',\r\n  async (params) => {\r\n    try {\r\n      const res = await server.post(logURI, params);\r\n      return res.data;\r\n    } catch (error) {\r\n      console.log(`Login failed: ${error}`);\r\n    }\r\n  }\r\n);\r\n\r\nexport const checkAuth = createAsyncThunk('auth/checkAuth', async () => {\r\n  try {\r\n    const res = await server.get(checkToken);\r\n    return res.data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nexport const authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    logOut: (state) => {\r\n      state.userLogin.data = null;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [LoginAttempt.pending]: (state) => {\r\n      state.userLogin.status = 'loading';\r\n      state.userLogin.data = null;\r\n    },\r\n    [LoginAttempt.fulfilled]: (state, action) => {\r\n      state.userLogin.status = 'complete';\r\n      state.userLogin.data = action.payload;\r\n    },\r\n    [LoginAttempt.rejected]: (state) => {\r\n      state.userLogin.status = 'error';\r\n      state.userLogin.data = null;\r\n    },\r\n  },\r\n});\r\n\r\n// checking if user = authorized\r\nexport function isAuthorized(state) {\r\n  return Boolean(state.auth.userLogin.data);\r\n}\r\n\r\nexport const { logOut } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,MAAM,MAAM,8BAA8B;AAEjD,MAAMC,MAAM,GAAG,aAAa;AAC5B,MAAMC,UAAU,GAAG,WAAW;AAC9B,MAAMC,MAAM,GAAG,oBAAoB;AAEnC,MAAMC,YAAY,GAAG;EACnBC,OAAO,EAAE;IACPC,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE,IAAI;IACXC,SAAS,EAAE,KAAK;IAChBC,MAAM,EAAE;EACV,CAAC;EACDC,SAAS,EAAE;IACTC,IAAI,EAAE,IAAI;IACVF,MAAM,EAAE;EACV;AACF,CAAC;AAED,OAAO,MAAMG,YAAY,GAAGhB,gBAAgB,CAC1C,mBAAmB,EACnB,MAAOiB,MAAM,IAAK;EAChB,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMjB,MAAM,CAACkB,IAAI,CAACjB,MAAM,EAAEe,MAAM,CAAC;IAC7C,OAAOC,GAAG,CAACH,IAAI;EACjB,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAAE,iBAAgBF,KAAM,EAAC,CAAC;EACvC;AACF,CAAC,CACF;AAED,OAAO,MAAMG,SAAS,GAAGvB,gBAAgB,CAAC,gBAAgB,EAAE,YAAY;EACtE,IAAI;IACF,MAAMkB,GAAG,GAAG,MAAMjB,MAAM,CAACuB,GAAG,CAACrB,UAAU,CAAC;IACxC,OAAOe,GAAG,CAACH,IAAI;EACjB,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACpB;AACF,CAAC,CAAC;AAEF,OAAO,MAAMK,SAAS,GAAG1B,WAAW,CAAC;EACnC2B,IAAI,EAAE,MAAM;EACZrB,YAAY;EACZsB,QAAQ,EAAE;IACRC,MAAM,EAAGC,KAAK,IAAK;MACjBA,KAAK,CAACf,SAAS,CAACC,IAAI,GAAG,IAAI;IAC7B;EACF,CAAC;EACDe,aAAa,EAAE;IACb,CAACd,YAAY,CAACe,OAAO,GAAIF,KAAK,IAAK;MACjCA,KAAK,CAACf,SAAS,CAACD,MAAM,GAAG,SAAS;MAClCgB,KAAK,CAACf,SAAS,CAACC,IAAI,GAAG,IAAI;IAC7B,CAAC;IACD,CAACC,YAAY,CAACgB,SAAS,GAAG,CAACH,KAAK,EAAEI,MAAM,KAAK;MAC3CJ,KAAK,CAACf,SAAS,CAACD,MAAM,GAAG,UAAU;MACnCgB,KAAK,CAACf,SAAS,CAACC,IAAI,GAAGkB,MAAM,CAACC,OAAO;IACvC,CAAC;IACD,CAAClB,YAAY,CAACmB,QAAQ,GAAIN,KAAK,IAAK;MAClCA,KAAK,CAACf,SAAS,CAACD,MAAM,GAAG,OAAO;MAChCgB,KAAK,CAACf,SAAS,CAACC,IAAI,GAAG,IAAI;IAC7B;EACF;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,SAASqB,YAAY,CAACP,KAAK,EAAE;EAClC,OAAOQ,OAAO,CAACR,KAAK,CAACS,IAAI,CAACxB,SAAS,CAACC,IAAI,CAAC;AAC3C;AAEA,OAAO,MAAM;EAAEa;AAAO,CAAC,GAAGH,SAAS,CAACc,OAAO;AAC3C,eAAed,SAAS,CAACe,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}